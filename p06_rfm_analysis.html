<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>p06_rfm_analysis.utf8</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<!-- Google Tag Manager -->

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NFJ7QKG');</script>

<!-- End Google Tag Manager -->

<!-- Script hiding navbar when scrolling down -->

<script>
  var didScroll;
  var lastScrollTop = 0;
  var delta = 1;
  var navbarHeight = $('[role="navigation"]').outerHeight();

  $(window).scroll(function(event) {
    didScroll = true;
  });

  setInterval(function() {
    if (didScroll) {
      hasScrolled();
      didScroll = false;
    }
  }, 250);

  function hasScrolled() {
    var st = $(this).scrollTop();

    if (Math.abs(lastScrollTop - st) <= delta)
      return;

    if (st > lastScrollTop && st > navbarHeight) {
      // Scroll Down
      $('[role="navigation"]').addClass('navbar-scroll-down');
    } else {
      // Scroll Up
      if (st + $(window).height() < $(document).height()) {
        $('[role="navigation"]').removeClass('navbar-scroll-down');
      }
    }

    lastScrollTop = st;
  }
</script>

<!-- End of script hiding navbar when scrolling down -->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<!-- Google Tag Manager (noscript) -->

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NFJ7QKG"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<!-- End Google Tag Manager (noscript) -->

<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header active">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://sauder.ubc.ca" target="_blank"><svg width="190" height="42.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 190 42.5" enable-background="new 0 0 190 42.5" xml:space="preserve">
  <path class="logo__primary" d="M93.7 24.8c-2.3 0-4.6-.5-6.7-1.5l.7-4c1.9 1 3.9 1.7 6.1 1.8 1.3 0 2.4-.6 2.4-1.7s-.6-1.7-3.2-2.6c-3.8-1.5-5.6-2.7-5.6-6 0-3.6 2.9-5.6 6.5-5.6 2-.1 4 .4 5.7 1.2l-.7 4c-1.5-1-3.3-1.5-5.1-1.5-1.5 0-2.1.6-2.1 1.5s.6 1.6 2.8 2.4c4.2 1.5 5.8 2.9 5.8 6.1.2 4.1-2.8 6-6.6 5.9zM115.5 24.8l-1.3-4.2h-6.7l-1.3 3.9h-4.6l6.8-19.3h5.3l6.6 18.6-4.8 1zM110.7 10l-2.2 6.9h4.5l-2.3-6.9zM129.2 24.9c-4.7 0-8-2.6-8-7.9V5.4h4.8V17c0 2.5 1.1 3.9 3.3 3.9 2.1 0 3.3-1.5 3.3-3.8V5.4h4.8V17c-.1 5.3-3.5 8-8.2 7.9zM147.3 24.6h-6.7V5.4h6.6c6.6 0 10.2 3.8 10.2 9.6s-3.6 9.6-10.1 9.6zm-.2-15.5h-1.7v11.8h1.7c3.4 0 5.5-1.8 5.5-5.8s-2.2-6-5.5-6zM160 24.6V5.4h11.9v3.8h-7.3v3.4h5.6l.6 4h-6.2v4.2h7.5v3.8H160zM190 24l-4.8.8-4.2-6.7h-1.5v6.6h-4.8V5.4h6.7c4.6 0 7.4 2.1 7.4 6.1.1 2.4-1.3 4.7-3.6 5.5l4.8 7zm-8.9-15h-1.6v5.6h1.5c2 0 3.3-1 3.3-2.8S183.2 9 181.1 9zM8 24.9c-4.7 0-8-2.6-8-7.9V5.5h4.9v11.6C4.9 19.5 6 21 8.1 21s3.3-1.5 3.3-3.8V5.5h4.8v11.6c-.1 5.3-3.5 7.8-8.2 7.8zM25.5 24.7h-6.4V5.5h6.5c4.4 0 6.5 1.9 6.5 4.9 0 1.8-1.1 3.4-2.8 4 2.1.5 3.6 2.5 3.4 4.7.2 3.7-2.6 5.6-7.2 5.6zm-.2-15.8h-1.7v4.4h1.6c1.8 0 2.7-.9 2.7-2.2s-.7-2.2-2.6-2.2zm0 7.4h-1.7v4.9h1.8c1.9 0 3-.8 3-2.5s-1.1-2.4-3.1-2.4zM44.1 25c-5.8 0-9.3-3.9-9.3-9.9s3.7-10 9.2-10c1.8-.1 3.7.4 5.3 1.2l-.7 4.3c-1.2-1-2.7-1.5-4.3-1.6-2.9 0-4.8 2.2-4.8 6s2.1 6 5.1 6c1.6-.1 3.1-.6 4.4-1.4l.6 3.9c-1.8 1-3.6 1.5-5.5 1.5zM27.9 42.3c-1 0-1.9-.2-2.8-.6l.2-1.2c.8.4 1.7.7 2.6.7s1.6-.5 1.6-1.1-.5-.9-1.6-1.3c-1.7-.5-2.6-1.1-2.6-2.3.1-1.4 1.2-2.4 2.6-2.4h.1c.8 0 1.6.2 2.4.5l-.3 1.4c-.7-.3-1.4-.5-2.1-.6-.8 0-1.3.5-1.3.9 0 .7.5.8 1.7 1.2 1.7.5 2.5 1.1 2.5 2.3-.1 1.7-1.3 2.6-3 2.5zM36.8 42.5c-2.4 0-3.8-1.7-3.8-4.2s1.6-4.2 3.8-4.2c.8 0 1.6.2 2.4.6l-.3 1.3c-.6-.4-1.3-.7-2-.7-1.6 0-2.5 1.1-2.5 2.9s.9 2.9 2.5 2.9c.8 0 1.5-.3 2.1-.8l.2 1.2c-.7.7-1.5.9-2.4 1zM46.9 42.2v-3.5h-3.7v3.5h-1.5v-8h1.5v3.2h3.7v-3.1h1.5v8l-1.5-.1zM54.8 42.5c-2.1 0-3.9-1.8-3.8-3.9v-.2c-.2-2.1 1.4-3.9 3.5-4.1 2.1-.2 3.9 1.4 4.1 3.5v.6c.2 2.1-1.5 4-3.6 4.2 0-.1-.1-.1-.2-.1zm0-7.2c-1.6 0-2.4 1.2-2.4 2.9s.9 2.9 2.4 2.9 2.4-1.3 2.4-2.9-.9-2.9-2.4-2.9zM64.7 42.5c-2.1 0-3.9-1.8-3.8-3.9v-.2c-.2-2.1 1.4-3.9 3.5-4.1 2.1-.2 3.9 1.4 4.1 3.5v.6c.2 2.1-1.5 4-3.6 4.2 0-.1-.1-.1-.2-.1zm0-7.2c-1.6 0-2.4 1.2-2.4 2.9s.9 2.9 2.4 2.9 2.4-1.3 2.4-2.9-.9-2.9-2.4-2.9zM71.1 42.2v-8h1.5V41h3l.2 1.2h-4.7zM86.1 42.5c-2.1 0-3.9-1.8-3.8-3.9v-.2c-.2-2.1 1.4-3.9 3.5-4.1s3.9 1.4 4.1 3.5v.6c.2 2.1-1.5 4-3.6 4.2-.1-.1-.1-.1-.2-.1zm0-7.2c-1.6 0-2.4 1.2-2.4 2.9s.9 2.9 2.4 2.9 2.4-1.3 2.4-2.9-.9-2.9-2.4-2.9zM94 35.5v2.2h2.7l.2 1.2H94v3.4h-1.5v-8h4.8v1.2H94zM106.8 42.2h-2.6v-8h2.6c1.8 0 2.7.8 2.7 2 .1.8-.4 1.5-1.1 1.7.9.1 1.6 1 1.6 1.9-.2 1.7-1.4 2.4-3.2 2.4zm-.1-6.7h-1.1v2h1.1c1 0 1.5-.3 1.5-1.1 0-.6-.5-.9-1.5-.9zm.1 3.2h-1.2v2.5h1.2c1 0 1.7-.3 1.7-1.2s-.6-1.3-1.7-1.3zM115.6 42.5c-1.7.2-3.1-1.1-3.3-2.7v-5.5h1.4v4.8c0 1.3.6 2.1 1.8 2.1s1.9-.8 1.9-2.1v-4.8h1.5v4.8c.1 1.7-1.1 3.2-2.9 3.4h-.4zM124.2 42.3c-1 0-1.9-.2-2.8-.6l.2-1.2c.8.4 1.7.7 2.6.7s1.6-.5 1.6-1.1-.4-.9-1.6-1.3c-1.7-.6-2.6-1.1-2.6-2.4.1-1.4 1.2-2.4 2.6-2.4h.1c.8 0 1.6.2 2.4.5l-.2 1.3c-.7-.3-1.4-.5-2.1-.6-.8 0-1.3.5-1.3.9 0 .7.4.8 1.7 1.2 1.7.6 2.5 1.1 2.5 2.4-.2 1.8-1.3 2.6-3.1 2.6zM129.8 42.2v-8h1.5v8h-1.5zM139.7 42.2l-4-6v6h-1.4v-8h1.5l3.8 5.7v-5.7h1.4v8h-1.3zM143.9 42.2v-8h4.9v1.2h-3.6v2h2.8l.2 1.2h-3V41h3.7v1.2h-5zM153.7 42.3c-1 0-1.9-.2-2.8-.6l.2-1.2c.8.4 1.7.7 2.6.7.9 0 1.6-.5 1.6-1.1s-.4-.9-1.6-1.3c-1.7-.6-2.6-1.1-2.6-2.4.1-1.4 1.2-2.4 2.6-2.4h.1c.8 0 1.6.2 2.4.5l-.2 1.3c-.7-.3-1.4-.5-2.1-.6-.8 0-1.4.5-1.4.9 0 .7.4.8 1.7 1.2 1.7.6 2.5 1.1 2.5 2.4 0 1.8-1.2 2.6-3 2.6zM161.5 42.3c-1 0-1.9-.2-2.8-.6l.2-1.2c.8.4 1.7.7 2.6.7.9 0 1.6-.5 1.6-1.1s-.4-.9-1.6-1.3c-1.7-.6-2.6-1.1-2.6-2.4.1-1.4 1.2-2.4 2.6-2.4h.1c.8 0 1.6.2 2.4.5l-.2 1.3c-.7-.3-1.4-.5-2.1-.6-.8 0-1.4.5-1.4.9 0 .7.4.8 1.7 1.2 1.7.6 2.5 1.1 2.5 2.4-.1 1.8-1.2 2.6-3 2.6zM68.3 19.9l-6 4.6V5.7l6 5.2v9z"></path>
  <path class="logo__secondary" d="M75.3 25.2l4.6 3.6V.8l-4.6 4v20.4zM61.6 25.2l-4.7 3.6V.8l4.7 4v20.4zM74.7 4.4L79.8 0H57l5 4.4h12.7z"></path>
</svg></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="active">
  <a href="index.html">Analytics@Sauder</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="https://blogs.ubc.ca/businessanalytics">News</a>
</li>
<li>
  <a href="notebooks.html">Notebooks</a>
</li>
<li>
  <a href="resources.html">Resources</a>
</li>
<li class="cta">
  <a href="contribute.html" style="
    color: #ffffff;
">Get Involved</a>
</li>

      </ul>
      <ul class="nav navbar-nav navbar-right">

      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<div id="rfm-analysis" class="section level2">
<h2>RFM Analysis</h2>
<div id="author-kemjika-ananaba" class="section level4">
<h4>Author: Kemjika Ananaba</h4>
<p>Customer analytics are important in order to run a successful business. Sales and marketing resources are finite and expensive; therefore, it is important to answer the following questions when developing a marketing strategy:</p>
<ul>
<li>Who are our most/least valuable customers?</li>
<li>How can we acquire new customers who resemble our most valuable customers?</li>
</ul>
<p>In this Project, we focus on RFM (Recency, Frequency, and Monetary value) analysis. This type of analysis is used when historical data for existing customers are available. We encourage you to create your own Jupytor Notebook and follow along. You can also download this Notebook together with any accompanying data in the <a href="https://github.com/Master-of-Business-Analytics/Notebooks_and_Data">Notebooks and Data</a> GitHub Repository. Alternatively, if you do not have Python or Jupyter Notebook installed yet, you may experiment with a virtual Notebook by launching Binder or Syzygy below (learn more about these two tools in the <a href="https://analytics-at-sauder.github.io/resource.html">Resource</a> tab).</p>
<p><a href="https://ubc.syzygy.ca/jupyter/hub/user-redirect/git-pull?repo=https%3A%2F%2Fgithub.com%2FAnalytics-at-Sauder%2FProject_06_RFM_Analysis&urlpath=tree%2FProject_06_RFM_Analysis%2Fp06_rfm_analysis.ipynb&branch=master" target="_blank" class="button">Launch Syzygy (UBC)</a></p>
<p><a href="https://pims.syzygy.ca/jupyter/hub/user-redirect/git-pull?repo=https%3A%2F%2Fgithub.com%2FAnalytics-at-Sauder%2FProject_06_RFM_Analysis&urlpath=tree%2FProject_06_RFM_Analysis%2Fp06_rfm_analysis.ipynb&branch=master" target="_blank" class="button">Launch Syzygy (Google)</a></p>
<p><a href="https://mybinder.org/v2/gh/Analytics-at-Sauder/Project_06_RFM_Analysis/master?filepath=p06_rfm_analysis.ipynb" target="_blank" class="button">Launch Binder</a></p>
</div>
</div>
<div id="background" class="section level2">
<h2>Background</h2>
<p>RFM Analysis identifies existing customers who are most likely to remain loyal to a company or respond to a new product. Among other things, RFM analysis allows us to create customized and personalized messaging, which can be used to streamline the various messages you send to a specific customer and continue sending messages of only a particular type, thereby reducing the chance of dissatisfaction or annoyanc while creating higher customer satisfaction. RFM is a model based on historical data and helps forecast future behavior based on past interactions. The RFM Model of customer value uses proven marketing principles to help businesses differentiate between marketing to existing customers versus new users, allowing businesses to create relevant and personalized messaging by understanding user behavior. The model allows businesses to segment its users according to three criteria based on an existing customer’s transaction history, namely:</p>
<ol style="list-style-type: decimal">
<li>The Recency of the customer’s last purchase</li>
<li>The Frequency of the customer’s purchases</li>
<li>The total amount spent, which is referred to as the customer’s Monetary value</li>
</ol>
<p>The RFM model, when used in conjunction with traditional models of segmentation, can help businesses visualize new and existing customers differently, and thus create favourable conditions to maximize customer lifetime value.</p>
</div>
<div id="business-problem" class="section level2">
<h2>Business Problem</h2>
<p>How do we segment our customers to reach them effectively through targeted marketing?</p>
<p>By applying the Pareto principle to a customer database, it is often the case that 80% of a company’s revenue comes from 20% of its customers. RFM helps determine who the top 20% customers are and groups the remaining customers into other segments, such as price-sensitive, potentially loyal, brand sensitive, etc. This ensures that each customer is better targeted, converting the other segments into the higher-value segments, and increases customer lifetime value.</p>
<p>In this Project, the customer sales data from January 2011 to May 2011 of an e-commerce store are analyzed to group customers from the United Kingdom into segments using the RFM model. The relevant libraries and the provided dataset are imported into the Python environment.</p>
<div id="dataset" class="section level3">
<h3>Dataset</h3>
<p>There are eight variables in the dataset:</p>
<ol style="list-style-type: decimal">
<li>InvoiceNo: invoice number, a 6-digit integral number uniquely assigned to each transaction.</li>
<li>StockCode: product code, a 5-digit integral number uniquely assigned to each distinct product.</li>
<li>Description: product name</li>
<li>Quantity: quantities of each product (item) per transaction.</li>
<li>InvoiceDate: invoice Date and time, a numeric value of the date and time when each transaction was generated.</li>
<li>UnitPrice: unit price, a numeric value of the product price, per unit, in sterling.</li>
<li>CustomerID: customer number, a 5-digit integral number uniquely assigned to each customer.</li>
<li>Country</li>
</ol>
<pre class="python"><code>import pandas as pd
import numpy as np
import seaborn as sns
from datetime import timedelta
import matplotlib.pyplot as plt

pd.set_option(&quot;display.max_columns&quot;,None);
pd.set_option(&quot;display.max_rows&quot;,None);

#load data
url = &#39;https://raw.githubusercontent.com/Master-of-Business-Analytics/Project_06_RFM_Analysis/master/data.csv&#39;
df = pd.read_csv(url, error_bad_lines=False,encoding= &#39;unicode_escape&#39;)</code></pre>
<pre class="python"><code>
df.head(5)</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
InvoiceNo
</th>
<th>
StockCode
</th>
<th>
Description
</th>
<th>
Quantity
</th>
<th>
InvoiceDate
</th>
<th>
UnitPrice
</th>
<th>
CustomerID
</th>
<th>
Country
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
540558
</td>
<td>
21258
</td>
<td>
?
</td>
<td>
-29
</td>
<td>
1/10/2011 10:04
</td>
<td>
0.00
</td>
<td>
NaN
</td>
<td>
United Kingdom
</td>
</tr>
<tr>
<th>
1
</th>
<td>
540560
</td>
<td>
21589
</td>
<td>
NaN
</td>
<td>
-14
</td>
<td>
1/10/2011 10:08
</td>
<td>
0.00
</td>
<td>
NaN
</td>
<td>
United Kingdom
</td>
</tr>
<tr>
<th>
2
</th>
<td>
540561
</td>
<td>
22343
</td>
<td>
PARTY PIZZA DISH RED RETROSPOT
</td>
<td>
24
</td>
<td>
1/10/2011 10:32
</td>
<td>
0.21
</td>
<td>
13004.0
</td>
<td>
United Kingdom
</td>
</tr>
<tr>
<th>
3
</th>
<td>
540561
</td>
<td>
22344
</td>
<td>
PARTY PIZZA DISH PINK POLKADOT
</td>
<td>
24
</td>
<td>
1/10/2011 10:32
</td>
<td>
0.21
</td>
<td>
13004.0
</td>
<td>
United Kingdom
</td>
</tr>
<tr>
<th>
4
</th>
<td>
540561
</td>
<td>
47504H
</td>
<td>
ENGLISH ROSE SPIRIT LEVEL
</td>
<td>
24
</td>
<td>
1/10/2011 10:32
</td>
<td>
0.85
</td>
<td>
13004.0
</td>
<td>
United Kingdom
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="data-cleaning" class="section level2">
<h2>Data Cleaning</h2>
<p>The dataset seems to be relatively clean at first glance, but it is actually riddled with null values. The code chunk below creates a new column that calculates the total purchase for each transaction. The NA values are also identified, and the rows containing these NA values are removed.</p>
<p>There are several methods of removing NA values from a dataset, such as replacing the NA value with another value or deleting the row entirely. The latter method, to choose removing the row entirely, is dependent on what data have already been manipulated and how much data are available.</p>
<pre class="python"><code>df.describe()</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
Quantity
</th>
<th>
UnitPrice
</th>
<th>
CustomerID
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
count
</th>
<td>
290603.000000
</td>
<td>
290603.000000
</td>
<td>
214539.000000
</td>
</tr>
<tr>
<th>
mean
</th>
<td>
8.363265
</td>
<td>
4.302626
</td>
<td>
15528.122756
</td>
</tr>
<tr>
<th>
std
</th>
<td>
292.791363
</td>
<td>
72.531652
</td>
<td>
1592.760180
</td>
</tr>
<tr>
<th>
min
</th>
<td>
-80995.000000
</td>
<td>
0.000000
</td>
<td>
12346.000000
</td>
</tr>
<tr>
<th>
25%
</th>
<td>
1.000000
</td>
<td>
1.250000
</td>
<td>
14159.000000
</td>
</tr>
<tr>
<th>
50%
</th>
<td>
3.000000
</td>
<td>
2.100000
</td>
<td>
15493.000000
</td>
</tr>
<tr>
<th>
75%
</th>
<td>
10.000000
</td>
<td>
4.130000
</td>
<td>
16923.000000
</td>
</tr>
<tr>
<th>
max
</th>
<td>
80995.000000
</td>
<td>
17836.460000
</td>
<td>
18287.000000
</td>
</tr>
</tbody>
</table>
</div>
<p>In any event, it is good practice to sift out erroneous transactions, particularly when they result in extreme outliers. In this section, the large transactions are scanned to clean the data. More information on data cleaning can be found in our <a href="https://master-of-business-analytics.github.io/Website/Data_Cleaning.html">Data Cleaning Project</a>.</p>
<pre class="python"><code># information about the data set
print(&#39;{:,} rows; {:,} columns&#39;
      .format(df.shape[0], df.shape[1]))
print(&#39;{:,} transactions don\&#39;t have a customer id&#39;
      .format(df[df.CustomerID.isnull()].shape[0]))
print(&#39;Transactions timeframe from {} to {}&#39;.format(df[&#39;InvoiceDate&#39;].min(),
                                    df[&#39;InvoiceDate&#39;].max()))

#Eliminating NA rows in Cstomer ID

df=df[df.notnull().all(axis=1)] #eliminating NA</code></pre>
<pre><code>    290,603 rows; 8 columns
    76,064 transactions don&#39;t have a customer id
    Transactions timeframe from 1/10/2011 10:04 to 5/20/2011 14:06</code></pre>
<pre class="python"><code>print(&#39;{:,} rows; {:,} columns&#39;
      .format(df.shape[0], df.shape[1]))</code></pre>
<pre><code>    214,539 rows; 8 columns
</code></pre>
<pre class="python"><code>#remove mi
df.drop(index=[df[&#39;Quantity&#39;].idxmax(), df[&#39;Quantity&#39;].idxmin()], inplace=True)
df.describe()</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
Quantity
</th>
<th>
UnitPrice
</th>
<th>
CustomerID
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
count
</th>
<td>
214537.000000
</td>
<td>
214537.000000
</td>
<td>
214537.000000
</td>
</tr>
<tr>
<th>
mean
</th>
<td>
10.561642
</td>
<td>
3.048388
</td>
<td>
15528.114199
</td>
</tr>
<tr>
<th>
std
</th>
<td>
232.168351
</td>
<td>
14.165101
</td>
<td>
1592.765139
</td>
</tr>
<tr>
<th>
min
</th>
<td>
-74215.000000
</td>
<td>
0.000000
</td>
<td>
12346.000000
</td>
</tr>
<tr>
<th>
25%
</th>
<td>
2.000000
</td>
<td>
1.250000
</td>
<td>
14159.000000
</td>
</tr>
<tr>
<th>
50%
</th>
<td>
4.000000
</td>
<td>
1.950000
</td>
<td>
15493.000000
</td>
</tr>
<tr>
<th>
75%
</th>
<td>
12.000000
</td>
<td>
3.750000
</td>
<td>
16923.000000
</td>
</tr>
<tr>
<th>
max
</th>
<td>
74215.000000
</td>
<td>
3155.950000
</td>
<td>
18287.000000
</td>
</tr>
</tbody>
</table>
</div>
<pre class="python"><code>
df.drop(index=[df[&#39;Quantity&#39;].idxmax(), df[&#39;Quantity&#39;].idxmin()], inplace=True)
df.describe()</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
Quantity
</th>
<th>
UnitPrice
</th>
<th>
CustomerID
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
count
</th>
<td>
214535.000000
</td>
<td>
214535.000000
</td>
<td>
214535.000000
</td>
</tr>
<tr>
<th>
mean
</th>
<td>
10.561741
</td>
<td>
3.048407
</td>
<td>
15528.143865
</td>
</tr>
<tr>
<th>
std
</th>
<td>
50.550843
</td>
<td>
14.165166
</td>
<td>
1592.742929
</td>
</tr>
<tr>
<th>
min
</th>
<td>
-3114.000000
</td>
<td>
0.000000
</td>
<td>
12747.000000
</td>
</tr>
<tr>
<th>
25%
</th>
<td>
2.000000
</td>
<td>
1.250000
</td>
<td>
14159.000000
</td>
</tr>
<tr>
<th>
50%
</th>
<td>
4.000000
</td>
<td>
1.950000
</td>
<td>
15493.000000
</td>
</tr>
<tr>
<th>
75%
</th>
<td>
12.000000
</td>
<td>
3.750000
</td>
<td>
16923.000000
</td>
</tr>
<tr>
<th>
max
</th>
<td>
12540.000000
</td>
<td>
3155.950000
</td>
<td>
18287.000000
</td>
</tr>
</tbody>
</table>
</div>
<p>Note that the <code>minimum quantity</code> and <code>maximum quantity</code> have different absolute values.</p>
<pre class="python"><code>df = df[df[&#39;UnitPrice&#39;]&gt;0]

df.describe()</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
Quantity
</th>
<th>
UnitPrice
</th>
<th>
CustomerID
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
count
</th>
<td>
214516.000000
</td>
<td>
214516.000000
</td>
<td>
214516.000000
</td>
</tr>
<tr>
<th>
mean
</th>
<td>
10.503361
</td>
<td>
3.048677
</td>
<td>
15528.224948
</td>
</tr>
<tr>
<th>
std
</th>
<td>
42.705725
</td>
<td>
14.165764
</td>
<td>
1592.710040
</td>
</tr>
<tr>
<th>
min
</th>
<td>
-3114.000000
</td>
<td>
0.001000
</td>
<td>
12747.000000
</td>
</tr>
<tr>
<th>
25%
</th>
<td>
2.000000
</td>
<td>
1.250000
</td>
<td>
14159.000000
</td>
</tr>
<tr>
<th>
50%
</th>
<td>
4.000000
</td>
<td>
1.950000
</td>
<td>
15493.000000
</td>
</tr>
<tr>
<th>
75%
</th>
<td>
12.000000
</td>
<td>
3.750000
</td>
<td>
16923.000000
</td>
</tr>
<tr>
<th>
max
</th>
<td>
4800.000000
</td>
<td>
3155.950000
</td>
<td>
18287.000000
</td>
</tr>
</tbody>
</table>
</div>
<pre class="python"><code># Convert InvoiceDate from object to datetime format
df[&#39;InvoiceDate&#39;] = pd.to_datetime(df[&#39;InvoiceDate&#39;])

#creating a total sales column
df[&quot;Totalsum&quot;] = df[&#39;Quantity&#39;] * df[&#39;UnitPrice&#39;]

#Check the remaining large negative transactions
df[df.Totalsum&lt;0].sort_values(&#39;Totalsum&#39;).head(10)</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
InvoiceNo
</th>
<th>
StockCode
</th>
<th>
Description
</th>
<th>
Quantity
</th>
<th>
InvoiceDate
</th>
<th>
UnitPrice
</th>
<th>
CustomerID
</th>
<th>
Country
</th>
<th>
Totalsum
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
257377
</th>
<td>
C550456
</td>
<td>
21108
</td>
<td>
FAIRY CAKE FLANNEL ASSORTED COLOUR
</td>
<td>
-3114
</td>
<td>
2011-04-18 13:08:00
</td>
<td>
2.10
</td>
<td>
15749.0
</td>
<td>
United Kingdom
</td>
<td>
-6539.40
</td>
</tr>
<tr>
<th>
257375
</th>
<td>
C550456
</td>
<td>
85123A
</td>
<td>
WHITE HANGING HEART T-LIGHT HOLDER
</td>
<td>
-1930
</td>
<td>
2011-04-18 13:08:00
</td>
<td>
2.55
</td>
<td>
15749.0
</td>
<td>
United Kingdom
</td>
<td>
-4921.50
</td>
</tr>
<tr>
<th>
257373
</th>
<td>
C550456
</td>
<td>
48185
</td>
<td>
DOORMAT FAIRY CAKE
</td>
<td>
-670
</td>
<td>
2011-04-18 13:08:00
</td>
<td>
6.75
</td>
<td>
15749.0
</td>
<td>
United Kingdom
</td>
<td>
-4522.50
</td>
</tr>
<tr>
<th>
257376
</th>
<td>
C550456
</td>
<td>
21175
</td>
<td>
GIN + TONIC DIET METAL SIGN
</td>
<td>
-2000
</td>
<td>
2011-04-18 13:08:00
</td>
<td>
1.85
</td>
<td>
15749.0
</td>
<td>
United Kingdom
</td>
<td>
-3700.00
</td>
</tr>
<tr>
<th>
257374
</th>
<td>
C550456
</td>
<td>
47566B
</td>
<td>
TEA TIME PARTY BUNTING
</td>
<td>
-1300
</td>
<td>
2011-04-18 13:08:00
</td>
<td>
2.55
</td>
<td>
15749.0
</td>
<td>
United Kingdom
</td>
<td>
-3315.00
</td>
</tr>
<tr>
<th>
275098
</th>
<td>
C549452
</td>
<td>
D
</td>
<td>
Discount
</td>
<td>
-1
</td>
<td>
2011-04-08 14:17:00
</td>
<td>
1867.86
</td>
<td>
17940.0
</td>
<td>
United Kingdom
</td>
<td>
-1867.86
</td>
</tr>
<tr>
<th>
35080
</th>
<td>
C570556
</td>
<td>
22273
</td>
<td>
FELTCRAFT DOLL MOLLY
</td>
<td>
-720
</td>
<td>
2011-10-11 11:10:00
</td>
<td>
2.55
</td>
<td>
16029.0
</td>
<td>
United Kingdom
</td>
<td>
-1836.00
</td>
</tr>
<tr>
<th>
35074
</th>
<td>
C570556
</td>
<td>
22273
</td>
<td>
FELTCRAFT DOLL MOLLY
</td>
<td>
-720
</td>
<td>
2011-10-11 11:10:00
</td>
<td>
2.30
</td>
<td>
16029.0
</td>
<td>
United Kingdom
</td>
<td>
-1656.00
</td>
</tr>
<tr>
<th>
69265
</th>
<td>
C569387
</td>
<td>
23284
</td>
<td>
DOORMAT KEEP CALM AND COME IN
</td>
<td>
-200
</td>
<td>
2011-10-03 16:49:00
</td>
<td>
7.08
</td>
<td>
14031.0
</td>
<td>
United Kingdom
</td>
<td>
-1416.00
</td>
</tr>
<tr>
<th>
35081
</th>
<td>
C570556
</td>
<td>
20971
</td>
<td>
PINK BLUE FELT CRAFT TRINKET BOX
</td>
<td>
-1296
</td>
<td>
2011-10-11 11:10:00
</td>
<td>
1.06
</td>
<td>
16029.0
</td>
<td>
United Kingdom
</td>
<td>
-1373.76
</td>
</tr>
</tbody>
</table>
</div>
<pre class="python"><code># Customer 15749 is in the top 10 
df[df.CustomerID==15749].sort_values(&#39;Totalsum&#39;).head(10)</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
InvoiceNo
</th>
<th>
StockCode
</th>
<th>
Description
</th>
<th>
Quantity
</th>
<th>
InvoiceDate
</th>
<th>
UnitPrice
</th>
<th>
CustomerID
</th>
<th>
Country
</th>
<th>
Totalsum
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
257377
</th>
<td>
C550456
</td>
<td>
21108
</td>
<td>
FAIRY CAKE FLANNEL ASSORTED COLOUR
</td>
<td>
-3114
</td>
<td>
2011-04-18 13:08:00
</td>
<td>
2.10
</td>
<td>
15749.0
</td>
<td>
United Kingdom
</td>
<td>
-6539.4
</td>
</tr>
<tr>
<th>
257375
</th>
<td>
C550456
</td>
<td>
85123A
</td>
<td>
WHITE HANGING HEART T-LIGHT HOLDER
</td>
<td>
-1930
</td>
<td>
2011-04-18 13:08:00
</td>
<td>
2.55
</td>
<td>
15749.0
</td>
<td>
United Kingdom
</td>
<td>
-4921.5
</td>
</tr>
<tr>
<th>
257373
</th>
<td>
C550456
</td>
<td>
48185
</td>
<td>
DOORMAT FAIRY CAKE
</td>
<td>
-670
</td>
<td>
2011-04-18 13:08:00
</td>
<td>
6.75
</td>
<td>
15749.0
</td>
<td>
United Kingdom
</td>
<td>
-4522.5
</td>
</tr>
<tr>
<th>
257376
</th>
<td>
C550456
</td>
<td>
21175
</td>
<td>
GIN + TONIC DIET METAL SIGN
</td>
<td>
-2000
</td>
<td>
2011-04-18 13:08:00
</td>
<td>
1.85
</td>
<td>
15749.0
</td>
<td>
United Kingdom
</td>
<td>
-3700.0
</td>
</tr>
<tr>
<th>
257374
</th>
<td>
C550456
</td>
<td>
47566B
</td>
<td>
TEA TIME PARTY BUNTING
</td>
<td>
-1300
</td>
<td>
2011-04-18 13:08:00
</td>
<td>
2.55
</td>
<td>
15749.0
</td>
<td>
United Kingdom
</td>
<td>
-3315.0
</td>
</tr>
<tr>
<th>
257775
</th>
<td>
550461
</td>
<td>
47556B
</td>
<td>
TEA TIME TEA TOWELS
</td>
<td>
1300
</td>
<td>
2011-04-18 13:20:00
</td>
<td>
2.10
</td>
<td>
15749.0
</td>
<td>
United Kingdom
</td>
<td>
2730.0
</td>
</tr>
<tr>
<th>
2204
</th>
<td>
540818
</td>
<td>
47556B
</td>
<td>
TEA TIME TEA TOWELS
</td>
<td>
1300
</td>
<td>
2011-01-11 12:57:00
</td>
<td>
2.55
</td>
<td>
15749.0
</td>
<td>
United Kingdom
</td>
<td>
3315.0
</td>
</tr>
<tr>
<th>
257777
</th>
<td>
550461
</td>
<td>
21175
</td>
<td>
GIN + TONIC DIET METAL SIGN
</td>
<td>
2000
</td>
<td>
2011-04-18 13:20:00
</td>
<td>
1.69
</td>
<td>
15749.0
</td>
<td>
United Kingdom
</td>
<td>
3380.0
</td>
</tr>
<tr>
<th>
2143
</th>
<td>
540815
</td>
<td>
21175
</td>
<td>
GIN + TONIC DIET METAL SIGN
</td>
<td>
2000
</td>
<td>
2011-01-11 12:55:00
</td>
<td>
1.85
</td>
<td>
15749.0
</td>
<td>
United Kingdom
</td>
<td>
3700.0
</td>
</tr>
<tr>
<th>
257776
</th>
<td>
550461
</td>
<td>
48185
</td>
<td>
DOORMAT FAIRY CAKE
</td>
<td>
670
</td>
<td>
2011-04-18 13:20:00
</td>
<td>
6.35
</td>
<td>
15749.0
</td>
<td>
United Kingdom
</td>
<td>
4254.5
</td>
</tr>
</tbody>
</table>
</div>
<pre class="python"><code># removing cancelled orders
#index 257377,257778, 257375, 257373,2142,2205,2143,257374,257376,2204 - all calcellations

df.drop(index=[257377,257778, 257375, 257373,2142,2205,2143,257374,257376,2204], inplace=True)

# customer 16029
df[df.CustomerID==16029].sort_values(&#39;InvoiceDate&#39;).head(10)</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
InvoiceNo
</th>
<th>
StockCode
</th>
<th>
Description
</th>
<th>
Quantity
</th>
<th>
InvoiceDate
</th>
<th>
UnitPrice
</th>
<th>
CustomerID
</th>
<th>
Country
</th>
<th>
Totalsum
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
25750
</th>
<td>
C540030
</td>
<td>
22070
</td>
<td>
SMALL RED RETROSPOT MUG IN BOX
</td>
<td>
-24
</td>
<td>
2011-01-04 13:47:00
</td>
<td>
3.75
</td>
<td>
16029.0
</td>
<td>
United Kingdom
</td>
<td>
-90.00
</td>
</tr>
<tr>
<th>
25749
</th>
<td>
540029
</td>
<td>
22207
</td>
<td>
FRYING PAN UNION FLAG
</td>
<td>
24
</td>
<td>
2011-01-04 13:47:00
</td>
<td>
3.75
</td>
<td>
16029.0
</td>
<td>
United Kingdom
</td>
<td>
90.00
</td>
</tr>
<tr>
<th>
5679
</th>
<td>
541105
</td>
<td>
85099F
</td>
<td>
JUMBO BAG STRAWBERRY
</td>
<td>
200
</td>
<td>
2011-01-13 14:34:00
</td>
<td>
1.65
</td>
<td>
16029.0
</td>
<td>
United Kingdom
</td>
<td>
330.00
</td>
</tr>
<tr>
<th>
5680
</th>
<td>
541105
</td>
<td>
22386
</td>
<td>
JUMBO BAG PINK POLKADOT
</td>
<td>
200
</td>
<td>
2011-01-13 14:34:00
</td>
<td>
1.65
</td>
<td>
16029.0
</td>
<td>
United Kingdom
</td>
<td>
330.00
</td>
</tr>
<tr>
<th>
13090
</th>
<td>
541610
</td>
<td>
84880
</td>
<td>
WHITE WIRE EGG HOLDER
</td>
<td>
17
</td>
<td>
2011-01-20 10:18:00
</td>
<td>
4.95
</td>
<td>
16029.0
</td>
<td>
United Kingdom
</td>
<td>
84.15
</td>
</tr>
<tr>
<th>
13091
</th>
<td>
541610
</td>
<td>
22207
</td>
<td>
FRYING PAN UNION FLAG
</td>
<td>
48
</td>
<td>
2011-01-20 10:18:00
</td>
<td>
3.75
</td>
<td>
16029.0
</td>
<td>
United Kingdom
</td>
<td>
180.00
</td>
</tr>
<tr>
<th>
13092
</th>
<td>
541610
</td>
<td>
21928
</td>
<td>
JUMBO BAG SCANDINAVIAN PAISLEY
</td>
<td>
100
</td>
<td>
2011-01-20 10:18:00
</td>
<td>
1.65
</td>
<td>
16029.0
</td>
<td>
United Kingdom
</td>
<td>
165.00
</td>
</tr>
<tr>
<th>
13093
</th>
<td>
541611
</td>
<td>
79321
</td>
<td>
CHILLI LIGHTS
</td>
<td>
96
</td>
<td>
2011-01-20 10:18:00
</td>
<td>
3.82
</td>
<td>
16029.0
</td>
<td>
United Kingdom
</td>
<td>
366.72
</td>
</tr>
<tr>
<th>
13094
</th>
<td>
541611
</td>
<td>
22779
</td>
<td>
WOODEN OWLS LIGHT GARLAND
</td>
<td>
48
</td>
<td>
2011-01-20 10:18:00
</td>
<td>
3.37
</td>
<td>
16029.0
</td>
<td>
United Kingdom
</td>
<td>
161.76
</td>
</tr>
<tr>
<th>
19493
</th>
<td>
541992
</td>
<td>
85099B
</td>
<td>
JUMBO BAG RED RETROSPOT
</td>
<td>
100
</td>
<td>
2011-01-25 09:31:00
</td>
<td>
1.65
</td>
<td>
16029.0
</td>
<td>
United Kingdom
</td>
<td>
165.00
</td>
</tr>
</tbody>
</table>
</div>
<pre class="python"><code># removing rows with the large equal absolute values
df.drop(index=[35090,35080,35074,83508,35077,83505,35075,35084,35076,83502,35089,35071,35072,35032,35088,35026,83471,35082,35079,35073,83469,35087], inplace=True)

df.describe()</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
Quantity
</th>
<th>
UnitPrice
</th>
<th>
CustomerID
</th>
<th>
Totalsum
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
count
</th>
<td>
214484.000000
</td>
<td>
214484.000000
</td>
<td>
214484.000000
</td>
<td>
214484.000000
</td>
</tr>
<tr>
<th>
mean
</th>
<td>
10.504928
</td>
<td>
3.048726
</td>
<td>
15528.163290
</td>
<td>
17.793502
</td>
</tr>
<tr>
<th>
std
</th>
<td>
40.050825
</td>
<td>
14.166812
</td>
<td>
1592.820059
</td>
<td>
62.596212
</td>
</tr>
<tr>
<th>
min
</th>
<td>
-1350.000000
</td>
<td>
0.001000
</td>
<td>
12747.000000
</td>
<td>
-1867.860000
</td>
</tr>
<tr>
<th>
25%
</th>
<td>
2.000000
</td>
<td>
1.250000
</td>
<td>
14159.000000
</td>
<td>
3.750000
</td>
</tr>
<tr>
<th>
50%
</th>
<td>
4.000000
</td>
<td>
1.950000
</td>
<td>
15493.000000
</td>
<td>
9.950000
</td>
</tr>
<tr>
<th>
75%
</th>
<td>
12.000000
</td>
<td>
3.750000
</td>
<td>
16923.000000
</td>
<td>
17.700000
</td>
</tr>
<tr>
<th>
max
</th>
<td>
4800.000000
</td>
<td>
3155.950000
</td>
<td>
18287.000000
</td>
<td>
6539.400000
</td>
</tr>
</tbody>
</table>
</div>
<p>The customer records are grouped by the recency of the purchases, the frequency of the quantities, and the monetary value of the purchases.</p>
<div id="recency" class="section level3">
<h3>Recency</h3>
<p>To calculate recency, a snapshot date is created. This date is one day after the most recent invoice date of the dataset. The date difference is used to show the recency of the purchase.</p>
<pre class="python"><code># Create snapshot date
snapshot_date = df[&#39;InvoiceDate&#39;].max() + timedelta(days=1)  # set current date as most recent date plus one day
rec_df = snapshot_date-df.groupby(&quot;CustomerID&quot;).agg({&quot;InvoiceDate&quot;:max}) 
#group customers by their most recent purchase

rec_df.rename(columns={&quot;InvoiceDate&quot;: &quot;Recency&quot;}, inplace=True)#rename column
rec_df=rec_df[&quot;Recency&quot;].apply(lambda x: x.days) #extracting number of days only
rec_df.head(5)</code></pre>
<pre><code>

    CustomerID
    12747.0      2
    12748.0      1
    12749.0      4
    12820.0      3
    12823.0    255
    Name: Recency, dtype: int64
</code></pre>
</div>
<div id="frequency" class="section level3">
<h3>Frequency</h3>
<p>To calculate the frequency, the number of invoices per customer is calculated.</p>
<pre class="python"><code>freq_df = df.groupby(&quot;CustomerID&quot;).agg({&#39;InvoiceNo&#39;: &#39;count&#39;})
freq_df.rename(columns={&quot;InvoiceNo&quot;: &quot;Frequency&quot;}, inplace=True)#rename column
freq_df.head()</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
Frequency
</th>
</tr>
<tr>
<th>
CustomerID
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
12747.0
</th>
<td>
50
</td>
</tr>
<tr>
<th>
12748.0
</th>
<td>
2729
</td>
</tr>
<tr>
<th>
12749.0
</th>
<td>
114
</td>
</tr>
<tr>
<th>
12820.0
</th>
<td>
45
</td>
</tr>
<tr>
<th>
12823.0
</th>
<td>
3
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="monetary" class="section level3">
<h3>Monetary</h3>
<p>To calculate the monetary score, the total value of each customer’s purchases is calculated.</p>
<pre class="python"><code>mon_df = df.groupby(&quot;CustomerID&quot;).agg({&#39;Totalsum&#39;: &#39;sum&#39;})
mon_df.rename(columns={&quot;Totalsum&quot;: &quot;Monetary&quot;}, inplace=True)#rename column
mon_df.head(5)</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
Monetary
</th>
</tr>
<tr>
<th>
CustomerID
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
12747.0
</th>
<td>
2040.43
</td>
</tr>
<tr>
<th>
12748.0
</th>
<td>
15727.57
</td>
</tr>
<tr>
<th>
12749.0
</th>
<td>
2194.75
</td>
</tr>
<tr>
<th>
12820.0
</th>
<td>
724.57
</td>
</tr>
<tr>
<th>
12823.0
</th>
<td>
994.50
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="rfm-model" class="section level3">
<h3>RFM Model</h3>
<pre class="python"><code>rfm=pd.concat([rec_df,freq_df, mon_df], axis=1) #combining all scores
rfm.head(7)</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
Recency
</th>
<th>
Frequency
</th>
<th>
Monetary
</th>
</tr>
<tr>
<th>
CustomerID
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
12747.0
</th>
<td>
2
</td>
<td>
50
</td>
<td>
2040.43
</td>
</tr>
<tr>
<th>
12748.0
</th>
<td>
1
</td>
<td>
2729
</td>
<td>
15727.57
</td>
</tr>
<tr>
<th>
12749.0
</th>
<td>
4
</td>
<td>
114
</td>
<td>
2194.75
</td>
</tr>
<tr>
<th>
12820.0
</th>
<td>
3
</td>
<td>
45
</td>
<td>
724.57
</td>
</tr>
<tr>
<th>
12823.0
</th>
<td>
255
</td>
<td>
3
</td>
<td>
994.50
</td>
</tr>
<tr>
<th>
12824.0
</th>
<td>
60
</td>
<td>
25
</td>
<td>
397.12
</td>
</tr>
<tr>
<th>
12826.0
</th>
<td>
3
</td>
<td>
62
</td>
<td>
964.20
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="creating-rank-scores" class="section level3">
<h3>Creating Rank Scores</h3>
<p>The customers are ranked in each of the three criteria (R,F, and M). Each criteria is broken into five buckets, and customer scores are assigned based on the relative percentile of each RFM feature, with each bucket representing 20% of the distribution. This approach of scaling customers from 1-5 will result in, at most, 125 different RFM scores (5x5x5), ranging from 111 (lowest) to 555 (highest).</p>
<pre class="python"><code># --Calculate R and F groups--

# Create labels for Recency and Frequency and MonetaryValue
r_labels = range(5, 0, -1) #[4,3,2,1] 
f_labels = range(1, 6)   #[1,2,3,4]
m_labels = range(1, 6)

# Assign these labels to 4 equal percentile groups 
r_groups = pd.qcut(rfm[&#39;Recency&#39;], q=5, labels=r_labels)
# Assign these labels to 4 equal percentile groups 
f_groups = pd.qcut(rfm[&#39;Frequency&#39;], q=5, labels=f_labels)

# Assign these labels to three equal percentile groups 
m_groups = pd.qcut(rfm[&#39;Monetary&#39;], q=5, labels=m_labels)



# Create new columns R_score, M_score and F_score  
rfm = rfm.assign(R_score = r_groups.values, F_score = f_groups.values, M_score = m_groups.values)
rfm.head()</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
Recency
</th>
<th>
Frequency
</th>
<th>
Monetary
</th>
<th>
R_score
</th>
<th>
F_score
</th>
<th>
M_score
</th>
</tr>
<tr>
<th>
CustomerID
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
12747.0
</th>
<td>
2
</td>
<td>
50
</td>
<td>
2040.43
</td>
<td>
5
</td>
<td>
4
</td>
<td>
5
</td>
</tr>
<tr>
<th>
12748.0
</th>
<td>
1
</td>
<td>
2729
</td>
<td>
15727.57
</td>
<td>
5
</td>
<td>
5
</td>
<td>
5
</td>
</tr>
<tr>
<th>
12749.0
</th>
<td>
4
</td>
<td>
114
</td>
<td>
2194.75
</td>
<td>
5
</td>
<td>
5
</td>
<td>
5
</td>
</tr>
<tr>
<th>
12820.0
</th>
<td>
3
</td>
<td>
45
</td>
<td>
724.57
</td>
<td>
5
</td>
<td>
3
</td>
<td>
4
</td>
</tr>
<tr>
<th>
12823.0
</th>
<td>
255
</td>
<td>
3
</td>
<td>
994.50
</td>
<td>
1
</td>
<td>
1
</td>
<td>
4
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="rfm-score" class="section level3">
<h3>RFM Score</h3>
<p>There are many ways to calculate the aggregate RFM score. Most companies allocate different weights to across the three criteria. For example, a customer of R_score=1, F_score=2 , M_score=3 could have the following possible RFM scores:</p>
<ol style="list-style-type: decimal">
<li>110+20+3 = 123 if weights 100, 10 , and 1 were allocated to the three criteria, respectively.</li>
<li>1+2+3 = 6 if each of the three criteria are given an equal weight of 1.</li>
<li>(1+2+3)/3 = 2 if we take the average of the three criteria.</li>
</ol>
<p>Depending on the nature of the business, we might increase or decrease the relative importance (the weight) of the three criteria variables to arrive at the final RFM score. In this Project, we continue forward by simply calculating the customer’s aggregate RFM score as the average of the three R, F, and M scores. This calculation method will provide an aggregate RFM score from 1 (lowest) to 5 (highest).</p>
<pre class="python"><code>#create avegare rfm score column
rfm[&#39;Ave_Score&#39;] = rfm[[&#39;R_score&#39;,&#39;F_score&#39;,&#39;M_score&#39;]].mean(axis=1)
#create rfm score by combining all scores
rfm[&#39;RFM score&#39;] = rfm.R_score.astype(str) \
                            + rfm.F_score.astype(str) \
                            + rfm.M_score.astype(str)
rfm.head()
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
Recency
</th>
<th>
Frequency
</th>
<th>
Monetary
</th>
<th>
R_score
</th>
<th>
F_score
</th>
<th>
M_score
</th>
<th>
Ave_Score
</th>
<th>
RFM score
</th>
</tr>
<tr>
<th>
CustomerID
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
12747.0
</th>
<td>
2
</td>
<td>
50
</td>
<td>
2040.43
</td>
<td>
5
</td>
<td>
4
</td>
<td>
5
</td>
<td>
4.666667
</td>
<td>
545
</td>
</tr>
<tr>
<th>
12748.0
</th>
<td>
1
</td>
<td>
2729
</td>
<td>
15727.57
</td>
<td>
5
</td>
<td>
5
</td>
<td>
5
</td>
<td>
5.000000
</td>
<td>
555
</td>
</tr>
<tr>
<th>
12749.0
</th>
<td>
4
</td>
<td>
114
</td>
<td>
2194.75
</td>
<td>
5
</td>
<td>
5
</td>
<td>
5
</td>
<td>
5.000000
</td>
<td>
555
</td>
</tr>
<tr>
<th>
12820.0
</th>
<td>
3
</td>
<td>
45
</td>
<td>
724.57
</td>
<td>
5
</td>
<td>
3
</td>
<td>
4
</td>
<td>
4.000000
</td>
<td>
534
</td>
</tr>
<tr>
<th>
12823.0
</th>
<td>
255
</td>
<td>
3
</td>
<td>
994.50
</td>
<td>
1
</td>
<td>
1
</td>
<td>
4
</td>
<td>
2.000000
</td>
<td>
114
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="customer-classification-based-on-rfm-analysis" class="section level2">
<h2>Customer Classification Based on RFM Analysis</h2>
<p>There are many ways we can use the RFM scores to create customer segments. The method used depends on the objective of the analysis. One way of classifying customers is by creating segments based on the average RFM score. Here, we adopt some common segment names for our quintile segments.</p>
<table>
<thead>
<tr class="header">
<th>Customer Segment</th>
<th>Average Score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Can’t lose them</td>
<td>5</td>
</tr>
<tr class="even">
<td>Champions</td>
<td>4-5</td>
</tr>
<tr class="odd">
<td>Loyal</td>
<td>3-4</td>
</tr>
<tr class="even">
<td>Needs Attention</td>
<td>2-3</td>
</tr>
<tr class="odd">
<td>Require Activation</td>
<td>0-2</td>
</tr>
</tbody>
</table>
<pre class="python"><code># Define rfm_level function
def rfm_level(df):
    if df[&#39;Ave_Score&#39;] &gt;= 5:
        return &#39;Can\&#39;t Loose Them&#39;
    elif ((df[&#39;Ave_Score&#39;] &gt;= 4) and (df[&#39;Ave_Score&#39;] &lt; 5)):
        return &#39;Champions&#39;
    elif ((df[&#39;Ave_Score&#39;] &gt;= 3) and (df[&#39;Ave_Score&#39;] &lt; 4)):
        return &#39;Loyal&#39;
    elif ((df[&#39;Ave_Score&#39;] &gt;= 2) and (df[&#39;Ave_Score&#39;] &lt; 3)):
        return &#39;Needs Attention&#39;
    else:
        return &#39;Require Activation&#39;
    
# Create a new variable RFM_Level by applying function to table

rfm[&#39;RFM_Level&#39;] = rfm.apply(rfm_level, axis=1)
# Print the header with top 5 rows to the console
rfm.head()</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
Recency
</th>
<th>
Frequency
</th>
<th>
Monetary
</th>
<th>
R_score
</th>
<th>
F_score
</th>
<th>
M_score
</th>
<th>
Ave_Score
</th>
<th>
RFM score
</th>
<th>
RFM_Level
</th>
</tr>
<tr>
<th>
CustomerID
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
12747.0
</th>
<td>
2
</td>
<td>
50
</td>
<td>
2040.43
</td>
<td>
5
</td>
<td>
4
</td>
<td>
5
</td>
<td>
4.666667
</td>
<td>
545
</td>
<td>
Champions
</td>
</tr>
<tr>
<th>
12748.0
</th>
<td>
1
</td>
<td>
2729
</td>
<td>
15727.57
</td>
<td>
5
</td>
<td>
5
</td>
<td>
5
</td>
<td>
5.000000
</td>
<td>
555
</td>
<td>
Can’t Loose Them
</td>
</tr>
<tr>
<th>
12749.0
</th>
<td>
4
</td>
<td>
114
</td>
<td>
2194.75
</td>
<td>
5
</td>
<td>
5
</td>
<td>
5
</td>
<td>
5.000000
</td>
<td>
555
</td>
<td>
Can’t Loose Them
</td>
</tr>
<tr>
<th>
12820.0
</th>
<td>
3
</td>
<td>
45
</td>
<td>
724.57
</td>
<td>
5
</td>
<td>
3
</td>
<td>
4
</td>
<td>
4.000000
</td>
<td>
534
</td>
<td>
Champions
</td>
</tr>
<tr>
<th>
12823.0
</th>
<td>
255
</td>
<td>
3
</td>
<td>
994.50
</td>
<td>
1
</td>
<td>
1
</td>
<td>
4
</td>
<td>
2.000000
</td>
<td>
114
</td>
<td>
Needs Attention
</td>
</tr>
</tbody>
</table>
</div>
<p><b> Calculating the size of each segment</b></p>
<pre class="python"><code># Calculate average values for each RFM_Level, and return a size of each segment 
rfm_level_agg = rfm.groupby(&#39;RFM_Level&#39;).agg({
    &#39;Recency&#39;: &#39;mean&#39;,
    &#39;Frequency&#39;: &#39;mean&#39;,
    &#39;Monetary&#39;: [&#39;mean&#39;, &#39;count&#39;]
}).round(1)


rfm_level_agg</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr>
<th>
</th>
<th>
Recency
</th>
<th>
Frequency
</th>
<th colspan="2" halign="left">
Monetary
</th>
</tr>
<tr>
<th>
</th>
<th>
mean
</th>
<th>
mean
</th>
<th>
mean
</th>
<th>
count
</th>
</tr>
<tr>
<th>
RFM_Level
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
Can’t Loose Them
</th>
<td>
4.0
</td>
<td>
290.7
</td>
<td>
6228.5
</td>
<td>
220
</td>
</tr>
<tr>
<th>
Champions
</th>
<td>
19.1
</td>
<td>
119.3
</td>
<td>
1954.5
</td>
<td>
691
</td>
</tr>
<tr>
<th>
Loyal
</th>
<td>
58.6
</td>
<td>
50.8
</td>
<td>
784.6
</td>
<td>
810
</td>
</tr>
<tr>
<th>
Needs Attention
</th>
<td>
113.1
</td>
<td>
22.5
</td>
<td>
388.5
</td>
<td>
918
</td>
</tr>
<tr>
<th>
Require Activation
</th>
<td>
215.4
</td>
<td>
9.9
</td>
<td>
163.1
</td>
<td>
634
</td>
</tr>
</tbody>
</table>
</div>
<pre class="python"><code>#visualizing customer segments based on average scores
rfm_level_agg[&#39;Monetary&#39;][&#39;count&#39;].plot(kind=&quot;barh&quot;, use_index=True, color=[&#39;red&#39;, &#39;orange&#39;, &#39;yellow&#39;, &#39;green&#39;, &#39;gold&#39;])
#rfm[&#39;Count&#39;].plot(kind=&quot;barh&quot;, use_index=True, color=[&#39;red&#39;, &#39;orange&#39;, &#39;yellow&#39;, &#39;green&#39;, &#39;gold&#39;])
plt.title(&quot;Customer Segments based on average scores&quot;)
plt.xlabel(&quot;Segments&quot;)
plt.ylabel(&quot;Number of customers&quot;)
plt.show()</code></pre>
<p><img src="output_37_0.png" /></p>
<pre class="python"><code>rfm_level_agg[&#39;Monetary&#39;][&#39;count&#39;]</code></pre>
<pre><code>

    RFM_Level
    Can&#39;t Loose Them      220
    Champions             691
    Loyal                 810
    Needs Attention       918
    Require Activation    634
    Name: count, dtype: int64</code></pre>
<p>Recall that the customer segmentation calculation method above assigns equal weighs to a customer’s recency, frequency, and monetary scores. RFM scores are practically used in various marketing strategies. For example, a business may choose to send specific types of communication or promotions based on the RFM segment in which customers appear:</p>
<ol style="list-style-type: decimal">
<li><p>Best Customers: this group consists of customers have an R_score=5, F_score=5 and M_Score=5, meaning that they transacted recently, do so often, and spend more than other customers. We would calculate an aggregate RFM score of 5. Earlier, we referred to this customer segment as “Can’t lose them”. A shortened notation for this segment is 5-5-5</p></li>
<li><p>High-Spending New Customers: this group consists of those customers in segments 5-1-5 and 5-1-4 . These are customers who transacted only once, but relatively recently, and they spent a lot.</p></li>
<li><p>Lowest-Spending Active Loyal Customers: this group consists of those customers in segments 5-5-1 and 5-5-2. These are customers who transacted recently and do so often, but spend the least.</p></li>
<li><p>Churned Best Customers: this group consists of those customers in segments 2-5-5, 1-5-5, 1-4-4 and 1-4-5. These are customers who transacted frequently and spent a lot, but it been a long time since they last transacted.</p></li>
</ol>
</div>
<div id="final-conclusion" class="section level2">
<h2>Final Conclusion</h2>
<p>RFM is a relatively simple technique that can drastically improve a company’s marketing performance. RFM analysis helps organizations find answers to the following questions:</p>
<ul>
<li><p>Who are your best customers?</p></li>
<li><p>Which of your customers could be contributing to your churn rate?</p></li>
<li><p>Which of your customers have the potential to become valuable customers?</p></li>
<li><p>Which of your customers can be retained?</p></li>
<li><p>Which of your customers are most likely to respond to engagement campaigns?</p></li>
</ul>
<p>However, there are some shortcomings with traditional RFM analysis, such as: * Computationally awkward and labour intensive.</p>
<ul>
<li><p>Ignores within-quintile variance.</p></li>
<li><p>Ordering of variables is arbitrary. Which do you sort by first?</p></li>
<li><p>Some variables may have too few levels.</p></li>
<li><p>Correlations between variables create problems: for example, first recency quintile may have higher frequency customers.</p></li>
<li><p>Does not generalize well to new customers.: for example, how do new customers get assigned to a quintile?</p></li>
</ul>
<p>As a result, logistic regression is usually preferred to RFM analysis when predicting the behaviour of the customer.</p>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<ol style="list-style-type: decimal">
<li><p>Aditya,A. (2020, March 20). Predictive Segments using RFM Analysis: An In-Depth Guide. Retrieved July 03, 2020, from <a href="https://www.moengage.com/blog/rfm-analysis-using-predictive-segments/" class="uri">https://www.moengage.com/blog/rfm-analysis-using-predictive-segments/</a></p></li>
<li><p>Yuan, Y. (2019, August 19). Recency, Frequency, Monetary Model with Python - and how Sephora uses it to optimize their Google… Retrieved July 03, 2020, from <a href="https://towardsdatascience.com/recency-frequency-monetary-model-with-python-and-how-sephora-uses-it-to-optimize-their-google-d6a0707c5f17" class="uri">https://towardsdatascience.com/recency-frequency-monetary-model-with-python-and-how-sephora-uses-it-to-optimize-their-google-d6a0707c5f17</a></p></li>
<li><a href="https://www.putler.com/rfm-analysis/" class="uri">https://www.putler.com/rfm-analysis/</a></li>
<li><p><a href="https://www.optimove.com/resources/learning-center/rfm-segmentation" class="uri">https://www.optimove.com/resources/learning-center/rfm-segmentation</a></p></li>
</ol>
<pre class="python"><code></code></pre>
</div>

<div class="footer">
  <p style="text-align: center;line-height: 1.5;font-size: 15px;">
    Created and maintained by the <a href="https://www.sauder.ubc.ca/programs/masters-degrees/mban">Master of Business Analytics</a> Community. <br> Licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>. <br>
  </p>
</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
