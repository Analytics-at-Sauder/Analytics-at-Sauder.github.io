<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>nb0003_project_risk_assessment.utf8</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<!-- Google Tag Manager -->

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NFJ7QKG');</script>

<!-- End Google Tag Manager -->

<!-- Script hiding navbar when scrolling down -->

<script>
  var didScroll;
  var lastScrollTop = 0;
  var delta = 1;
  var navbarHeight = $('[role="navigation"]').outerHeight();

  $(window).scroll(function(event) {
    didScroll = true;
  });

  setInterval(function() {
    if (didScroll) {
      hasScrolled();
      didScroll = false;
    }
  }, 250);

  function hasScrolled() {
    var st = $(this).scrollTop();

    if (Math.abs(lastScrollTop - st) <= delta)
      return;

    if (st > lastScrollTop && st > navbarHeight) {
      // Scroll Down
      $('[role="navigation"]').addClass('navbar-scroll-down');
    } else {
      // Scroll Up
      if (st + $(window).height() < $(document).height()) {
        $('[role="navigation"]').removeClass('navbar-scroll-down');
      }
    }

    lastScrollTop = st;
  }
</script>

<!-- End of script hiding navbar when scrolling down -->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<!-- Google Tag Manager (noscript) -->

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NFJ7QKG"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<!-- End Google Tag Manager (noscript) -->

<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header active">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a target="_blank" class="navbar-brand" href="https://sauder.ubc.ca" target="_blank"><svg width="190" height="42.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 190 42.5" enable-background="new 0 0 190 42.5" xml:space="preserve">
  <path class="logo__primary" d="M93.7 24.8c-2.3 0-4.6-.5-6.7-1.5l.7-4c1.9 1 3.9 1.7 6.1 1.8 1.3 0 2.4-.6 2.4-1.7s-.6-1.7-3.2-2.6c-3.8-1.5-5.6-2.7-5.6-6 0-3.6 2.9-5.6 6.5-5.6 2-.1 4 .4 5.7 1.2l-.7 4c-1.5-1-3.3-1.5-5.1-1.5-1.5 0-2.1.6-2.1 1.5s.6 1.6 2.8 2.4c4.2 1.5 5.8 2.9 5.8 6.1.2 4.1-2.8 6-6.6 5.9zM115.5 24.8l-1.3-4.2h-6.7l-1.3 3.9h-4.6l6.8-19.3h5.3l6.6 18.6-4.8 1zM110.7 10l-2.2 6.9h4.5l-2.3-6.9zM129.2 24.9c-4.7 0-8-2.6-8-7.9V5.4h4.8V17c0 2.5 1.1 3.9 3.3 3.9 2.1 0 3.3-1.5 3.3-3.8V5.4h4.8V17c-.1 5.3-3.5 8-8.2 7.9zM147.3 24.6h-6.7V5.4h6.6c6.6 0 10.2 3.8 10.2 9.6s-3.6 9.6-10.1 9.6zm-.2-15.5h-1.7v11.8h1.7c3.4 0 5.5-1.8 5.5-5.8s-2.2-6-5.5-6zM160 24.6V5.4h11.9v3.8h-7.3v3.4h5.6l.6 4h-6.2v4.2h7.5v3.8H160zM190 24l-4.8.8-4.2-6.7h-1.5v6.6h-4.8V5.4h6.7c4.6 0 7.4 2.1 7.4 6.1.1 2.4-1.3 4.7-3.6 5.5l4.8 7zm-8.9-15h-1.6v5.6h1.5c2 0 3.3-1 3.3-2.8S183.2 9 181.1 9zM8 24.9c-4.7 0-8-2.6-8-7.9V5.5h4.9v11.6C4.9 19.5 6 21 8.1 21s3.3-1.5 3.3-3.8V5.5h4.8v11.6c-.1 5.3-3.5 7.8-8.2 7.8zM25.5 24.7h-6.4V5.5h6.5c4.4 0 6.5 1.9 6.5 4.9 0 1.8-1.1 3.4-2.8 4 2.1.5 3.6 2.5 3.4 4.7.2 3.7-2.6 5.6-7.2 5.6zm-.2-15.8h-1.7v4.4h1.6c1.8 0 2.7-.9 2.7-2.2s-.7-2.2-2.6-2.2zm0 7.4h-1.7v4.9h1.8c1.9 0 3-.8 3-2.5s-1.1-2.4-3.1-2.4zM44.1 25c-5.8 0-9.3-3.9-9.3-9.9s3.7-10 9.2-10c1.8-.1 3.7.4 5.3 1.2l-.7 4.3c-1.2-1-2.7-1.5-4.3-1.6-2.9 0-4.8 2.2-4.8 6s2.1 6 5.1 6c1.6-.1 3.1-.6 4.4-1.4l.6 3.9c-1.8 1-3.6 1.5-5.5 1.5zM27.9 42.3c-1 0-1.9-.2-2.8-.6l.2-1.2c.8.4 1.7.7 2.6.7s1.6-.5 1.6-1.1-.5-.9-1.6-1.3c-1.7-.5-2.6-1.1-2.6-2.3.1-1.4 1.2-2.4 2.6-2.4h.1c.8 0 1.6.2 2.4.5l-.3 1.4c-.7-.3-1.4-.5-2.1-.6-.8 0-1.3.5-1.3.9 0 .7.5.8 1.7 1.2 1.7.5 2.5 1.1 2.5 2.3-.1 1.7-1.3 2.6-3 2.5zM36.8 42.5c-2.4 0-3.8-1.7-3.8-4.2s1.6-4.2 3.8-4.2c.8 0 1.6.2 2.4.6l-.3 1.3c-.6-.4-1.3-.7-2-.7-1.6 0-2.5 1.1-2.5 2.9s.9 2.9 2.5 2.9c.8 0 1.5-.3 2.1-.8l.2 1.2c-.7.7-1.5.9-2.4 1zM46.9 42.2v-3.5h-3.7v3.5h-1.5v-8h1.5v3.2h3.7v-3.1h1.5v8l-1.5-.1zM54.8 42.5c-2.1 0-3.9-1.8-3.8-3.9v-.2c-.2-2.1 1.4-3.9 3.5-4.1 2.1-.2 3.9 1.4 4.1 3.5v.6c.2 2.1-1.5 4-3.6 4.2 0-.1-.1-.1-.2-.1zm0-7.2c-1.6 0-2.4 1.2-2.4 2.9s.9 2.9 2.4 2.9 2.4-1.3 2.4-2.9-.9-2.9-2.4-2.9zM64.7 42.5c-2.1 0-3.9-1.8-3.8-3.9v-.2c-.2-2.1 1.4-3.9 3.5-4.1 2.1-.2 3.9 1.4 4.1 3.5v.6c.2 2.1-1.5 4-3.6 4.2 0-.1-.1-.1-.2-.1zm0-7.2c-1.6 0-2.4 1.2-2.4 2.9s.9 2.9 2.4 2.9 2.4-1.3 2.4-2.9-.9-2.9-2.4-2.9zM71.1 42.2v-8h1.5V41h3l.2 1.2h-4.7zM86.1 42.5c-2.1 0-3.9-1.8-3.8-3.9v-.2c-.2-2.1 1.4-3.9 3.5-4.1s3.9 1.4 4.1 3.5v.6c.2 2.1-1.5 4-3.6 4.2-.1-.1-.1-.1-.2-.1zm0-7.2c-1.6 0-2.4 1.2-2.4 2.9s.9 2.9 2.4 2.9 2.4-1.3 2.4-2.9-.9-2.9-2.4-2.9zM94 35.5v2.2h2.7l.2 1.2H94v3.4h-1.5v-8h4.8v1.2H94zM106.8 42.2h-2.6v-8h2.6c1.8 0 2.7.8 2.7 2 .1.8-.4 1.5-1.1 1.7.9.1 1.6 1 1.6 1.9-.2 1.7-1.4 2.4-3.2 2.4zm-.1-6.7h-1.1v2h1.1c1 0 1.5-.3 1.5-1.1 0-.6-.5-.9-1.5-.9zm.1 3.2h-1.2v2.5h1.2c1 0 1.7-.3 1.7-1.2s-.6-1.3-1.7-1.3zM115.6 42.5c-1.7.2-3.1-1.1-3.3-2.7v-5.5h1.4v4.8c0 1.3.6 2.1 1.8 2.1s1.9-.8 1.9-2.1v-4.8h1.5v4.8c.1 1.7-1.1 3.2-2.9 3.4h-.4zM124.2 42.3c-1 0-1.9-.2-2.8-.6l.2-1.2c.8.4 1.7.7 2.6.7s1.6-.5 1.6-1.1-.4-.9-1.6-1.3c-1.7-.6-2.6-1.1-2.6-2.4.1-1.4 1.2-2.4 2.6-2.4h.1c.8 0 1.6.2 2.4.5l-.2 1.3c-.7-.3-1.4-.5-2.1-.6-.8 0-1.3.5-1.3.9 0 .7.4.8 1.7 1.2 1.7.6 2.5 1.1 2.5 2.4-.2 1.8-1.3 2.6-3.1 2.6zM129.8 42.2v-8h1.5v8h-1.5zM139.7 42.2l-4-6v6h-1.4v-8h1.5l3.8 5.7v-5.7h1.4v8h-1.3zM143.9 42.2v-8h4.9v1.2h-3.6v2h2.8l.2 1.2h-3V41h3.7v1.2h-5zM153.7 42.3c-1 0-1.9-.2-2.8-.6l.2-1.2c.8.4 1.7.7 2.6.7.9 0 1.6-.5 1.6-1.1s-.4-.9-1.6-1.3c-1.7-.6-2.6-1.1-2.6-2.4.1-1.4 1.2-2.4 2.6-2.4h.1c.8 0 1.6.2 2.4.5l-.2 1.3c-.7-.3-1.4-.5-2.1-.6-.8 0-1.4.5-1.4.9 0 .7.4.8 1.7 1.2 1.7.6 2.5 1.1 2.5 2.4 0 1.8-1.2 2.6-3 2.6zM161.5 42.3c-1 0-1.9-.2-2.8-.6l.2-1.2c.8.4 1.7.7 2.6.7.9 0 1.6-.5 1.6-1.1s-.4-.9-1.6-1.3c-1.7-.6-2.6-1.1-2.6-2.4.1-1.4 1.2-2.4 2.6-2.4h.1c.8 0 1.6.2 2.4.5l-.2 1.3c-.7-.3-1.4-.5-2.1-.6-.8 0-1.4.5-1.4.9 0 .7.4.8 1.7 1.2 1.7.6 2.5 1.1 2.5 2.4-.1 1.8-1.2 2.6-3 2.6zM68.3 19.9l-6 4.6V5.7l6 5.2v9z"></path>
  <path class="logo__secondary" d="M75.3 25.2l4.6 3.6V.8l-4.6 4v20.4zM61.6 25.2l-4.7 3.6V.8l4.7 4v20.4zM74.7 4.4L79.8 0H57l5 4.4h12.7z"></path>
</svg></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="active">
  <a target="_blank" href="index.html">Analytics@Sauder</a>
</li>
<li>
  <a target="_blank" href="about.html">About</a>
</li>
<li>
  <a target="_blank" href="https://blogs.ubc.ca/businessanalytics">News</a>
</li>
<li>
  <a target="_blank" href="notebooks.html">Notebooks</a>
</li>
<li>
  <a target="_blank" href="resources.html">Resources</a>
</li>
<li class="cta">
  <a target="_blank" href="contribute.html" style="
    color: #ffffff;
">Get Involved</a>
</li>

      </ul>
      <ul class="nav navbar-nav navbar-right">

      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<div id="project-risk-assessment" class="section level2">
<h2>Project Risk Assessment</h2>
<div id="author-charlie-cao" class="section level4">
<h4>Author: Charlie Cao</h4>
<p>In this Notebook, we are going to explore ways to apply Monte Carlo Simulations in predicting a project’s completion date and assessing a project’s risk. We encourage you to create your own Jupyter Notebook and follow along. You can also download this Notebook along with any accompanying data in the <a target="_blank" href="https://github.com/Master-of-Business-Analytics/Notebooks_and_Data">Notebooks and Data</a> GitHub Repository. Alternatively, if you do not have Python or Jupyter Notebook installed yet, you may experiment with a virtual Notebook by launching Binder or Syzygy below (learn more about these two tools in the <a target="_blank" href="https://analytics-at-sauder.github.io/resource.html">Resource</a> tab).</p>
<p><a target="_blank" href="https://ubc.syzygy.ca/jupyter/hub/user-redirect/git-pull?repo=https%3A%2F%2Fgithub.com%2FAnalytics-at-Sauder%2FNB0003_Project_Risk_Assessment&urlpath=tree%2FNB0003_Project_Risk_Assessment%2Fnb0003_project_risk_assessment.ipynb&branch=master" target="_blank" class="button">Launch Syzygy (UBC)</a></p>
<p><a target="_blank" href="https://pims.syzygy.ca/jupyter/hub/user-redirect/git-pull?repo=https%3A%2F%2Fgithub.com%2FAnalytics-at-Sauder%2FNB0003_Project_Risk_Assessment&urlpath=tree%2FNB0003_Project_Risk_Assessment%2Fnb0003_project_risk_assessment.ipynb&branch=master" target="_blank" class="button">Launch Syzygy (Google)</a></p>
<p><a target="_blank" href="https://mybinder.org/v2/gh/Analytics-at-Sauder/NB0003_Project_Risk_Assessment/master?filepath=nb0003_project_risk_assessment.ipynb" target="_blank" class="button">Launch Binder</a></p>
</div>
</div>
<div id="background" class="section level2">
<h2>Background</h2>
<hr />
<p>A Monte Carlo Simulation is a great tool for making business decisions under uncertainty, and it is well known in the Project Management domain. Rather than simply providing a predicted average project completion time, we can instead find a range of possible completion dates using a Monte Carlo Simulation. With a simple prediction of the average completion time, there is a chance as high as 50% that the deadline will be missed. On the other hand, to be conservative with a predicted completion time could likely lead us to lose the project bid to a different team with a lower estimate (whether that is a realistic one or not), because no one likes to hear pessimistic estimates. Monte Carlo Simulations, in this case, can give us an idea of the possible distribution of the project completion time, which would then allow us to quote and make decisions that incorporate uncertainty.</p>
</div>
<div id="scenario-one-sequential-tasks" class="section level2">
<h2>Scenario One: Sequential Tasks</h2>
<hr />
<p>A construction project involves three tasks:</p>
<ol style="list-style-type: decimal">
<li>Task 1 is likely to take three days (70% probability), but it might also be completed in two days (with 10% probability) or four days (20% probability)</li>
<li>Task 2 has a 60% probability of taking six days to finish and a 20% probability each of being completed in five days or eight days</li>
<li>Task 3 has an 80% probability of being completed in four days, 5% probability of being completed in three days, and a 15% probability of being completed in five days.</li>
</ol>
<div class="figure">
<img src="nb0003_images/p03_01.png" alt="Sequential Tasks" />
<p class="caption">Sequential Tasks</p>
</div>
<p>Each task is dependent on the task before it, meaning that the three tasks must be executed in sequence. Your task is to provide information to the Project Manager concerning the expected completion time of the project and possible delays. Before we begin, install and import the following packages:</p>
<pre class="python"><code>import numpy as np
import pandas as pd
import matplotlib.pyplot as plt</code></pre>
<p>One simple method is to calculate the expected completion date of each task and then sum up these average predictions for the three tasks, which would lead to the following:</p>
<p><span class="math display">\[\begin{equation}
\begin{split}
E\,[Project\:Completion\:Time] &amp; = \sum_{n=1}^{3} E\,[Task_{n}\:Completion\:Time]\\
&amp; = (0.7 \cdot 3 + 0.1 \cdot 2 + 0.2 \cdot 4) + (0.6 \cdot 6 + 0.2 \cdot 5 + 0.2 \cdot 8) + (0.8 \cdot 4 + 0.05 \cdot 3 + 0.15 \cdot 5)\\
&amp; = 3.1 + 6.2 + 4\\
&amp; = 13.3\:(days)
\end{split}
\end{equation}\]</span></p>
<p>However, without getting into too much detail, there is a fair chance that the actual completion time of the project is shorter or longer than 13.3 days, and it would be helpful to know the probability of different project completion times. Simple scenarios like this might be easy to solve with mathematical equations (learn more about discrete random variables <a target="_blank" href="https://www.khanacademy.org/math/ap-statistics/random-variables-ap/discrete-random-variables/v/valid-discrete-probability-distribution-examples">here</a>), but real life situations are often much more complex. Therefore, a Monte Carlo Simulation would be very useful, because we will be able to simulate the different scenarios of possible task completion dates without getting deep into calculations. Simulated results also allow us to visualize the different scenarios and look at the actual distribution of those possibilities.</p>
<p>Let’s start with simulating one instance of Task 1:</p>
<pre class="python"><code>t1_comp = [3, 2, 4] # the possible completion time for task 1
t1_prob = [0.7, 0.1, 0.2] # the probability of each completion time for task 1

t1_time = np.random.choice(t1_comp, 1, p=t1_prob) # the second argument means that we only need one instance

print(t1_time)</code></pre>
<pre><code>[3]</code></pre>
<p>Now that you know how to simulate the completion for one task, we can also do the same for the other two tasks:</p>
<pre class="python"><code>t2_comp = [6, 5, 8]
t2_prob = [0.6, 0.2, 0.2]

t2_time = np.random.choice(t2_comp, 1, p=t2_prob)

t3_comp = [4, 3, 5]
t3_prob = [0.8, 0.05, 0.15]

t3_time = np.random.choice(t3_comp, 1, p=t3_prob)

print(t2_time)
print(t3_time)</code></pre>
<pre><code>[6]
[4]</code></pre>
<p>And now if we sum them up:</p>
<pre class="python"><code>proj_time = t1_time + t2_time + t3_time

print(proj_time)</code></pre>
<pre><code>[13]</code></pre>
<p>Note that every time you run the above code chunks, there would be a different project completion time; the essence of Monte Carlo Simulations is that we could record all those completion time and visualize their distribution. Thus, we can go ahead and simulate the above scenario a large number of times, let’s say 1,000 for now.</p>
<p>Note that it is always a good habit to record the intermediate steps of your simulation so that you can go back to inspect and validate your simulation. It is also good practice to define the number of replications (1,000) as a variable so that, in the future, if we want to change how many times we repeate the simulation, we will not have to search the entire document to look for every instance of it.</p>
<pre class="python"><code>reps = 1000 # a variable specifying number of replications

t1_record = [] # Initiate empty lists to record the competion time
t2_record = []
t3_record = []

proj_record = []

t1_comp = [3, 2, 4]
t1_prob = [0.7, 0.1, 0.2]

t2_comp = [6, 5, 8]
t2_prob = [0.6, 0.2, 0.2]

t3_comp = [4, 3, 5]
t3_prob = [0.8, 0.05, 0.15]

for i in range(reps):
    t1_time = np.random.choice(t1_comp, 1, p=t1_prob)[0]
    t2_time = np.random.choice(t2_comp, 1, p=t2_prob)[0]
    t3_time = np.random.choice(t3_comp, 1, p=t3_prob)[0]
    # Note the np.random.choice generates array outputs
    # so we are using index 0 here to extract the first integar in the array
    
    proj_time = t1_time + t2_time + t3_time
    
    t1_record.append(t1_time)
    t2_record.append(t2_time)
    t3_record.append(t3_time)
    
    proj_record.append(proj_time)</code></pre>
<p>And there, we have 1,000 replications of our construction project! It is a relatively fast simulation, partially because the problem is fairly simple. For larger problems, however, you might want to look into how you can optimize (or parallel) your replications in order to speed up the process. We will wait until the next scenario to dive deeper into this concept (see Scenario Two: Parallel Tasks, below). For now, let’s take a look at the first couple of results from our 1,000 replications:</p>
<pre class="python"><code>proj_df = pd.DataFrame({&quot;Task_1&quot;: t1_record, # creating a dataframe using the lists of records
                        &quot;Task_2&quot;: t2_record, 
                        &quot;Task_3&quot;: t3_record, 
                        &quot;Project&quot;: proj_record})

print(proj_df.head())</code></pre>
<pre><code>   Task_1  Task_2  Task_3  Project
0       3       5       4        8
1       3       6       4        9
2       3       6       4        9
3       3       6       4        9
4       3       8       4       11</code></pre>
<p>Below, we count the different instances of our project completion dates and plot out the distribution. As you can see, even though there are around 400 instances where our project is completed in about 13 days, there are quite a few hundred instances where the project is completed in less than AND more than 13 days. In situations like this, it is benefitial to communicate these possibilities to the Project Manager, so that you can manage the expections of stakeholders without losing the bid of a project.</p>
<pre class="python"><code>print(proj_df[&#39;Project&#39;].groupby(proj_df[&#39;Project&#39;]).count())</code></pre>
<pre><code>Project
10      1
11     19
12    185
13    394
14    205
15    131
16     55
17     10
Name: Project, dtype: int64</code></pre>
<pre class="python"><code>plt.bar(range(10,18),proj_df[&#39;Project&#39;].groupby(proj_df[&#39;Project&#39;]).count())</code></pre>
<pre><code>&lt;BarContainer object of 8 artists&gt;</code></pre>
<div class="figure">
<img src="nb0003_project_risk_assessment_files/nb0003_project_risk_assessment_14_1.png" alt="png" />
<p class="caption">png</p>
</div>
<p>In the graph above, we combine the distribution and the sample statistics of the project completion dates over the 1,000 replications (output of the next cell). We can see that the simulated project completion times are right-skewed; that is, the worst case scenario is further away from the median than the best case scenario. In order to have a 95% chance of meeting the deadline, the quote should actually be around 15 days, as calculated below.</p>
<pre class="python"><code>print(proj_df[&#39;Project&#39;].describe())</code></pre>
<pre><code>count    1000.000000
mean       13.446000
std         1.206872
min        10.000000
25%        13.000000
50%        13.000000
75%        14.000000
max        17.000000
Name: Project, dtype: float64</code></pre>
<pre class="python"><code>print(np.percentile(proj_record,95))</code></pre>
<pre><code>16.0</code></pre>
</div>
<div id="scenario-two-parallel-tasks" class="section level2">
<h2>Scenario Two: Parallel Tasks</h2>
<hr />
<p>Now, we have received new information that Tasks 2 and 3 can actually be conducted at the same time.</p>
<div class="figure">
<img src="nb0003_images/p03_02.png" alt="Parallel Tasks" />
<p class="caption">Parallel Tasks</p>
</div>
<p>With this update, the project completion time is now dependent on the task that gets completed later: <code>proj_time = t1_time + max(t2_time, t3_time)</code>. Therefore, we slightly modify our simulation to the following:</p>
<pre class="python"><code>reps = 1000

t1_record = []
t2_record = []
t3_record = []

proj_record = []

t1_comp = [3, 2, 4]
t1_prob = [0.7, 0.1, 0.2]

t2_comp = [6, 5, 8]
t2_prob = [0.6, 0.2, 0.2]

t3_comp = [4, 3, 5]
t3_prob = [0.8, 0.05, 0.15]

for i in range(reps):
    t1_time = np.random.choice(t1_comp, 1, p=t1_prob)[0]
    t2_time = np.random.choice(t2_comp, 1, p=t2_prob)[0]
    t3_time = np.random.choice(t3_comp, 1, p=t3_prob)[0]
    
    proj_time = t1_time + max(t2_time, t3_time) #note the change here
    
    t1_record.append(t1_time)
    t2_record.append(t2_time)
    t3_record.append(t3_time)
    
    proj_record.append(proj_time)
    
proj_df = pd.DataFrame({&quot;Task_1&quot;: t1_record,
                        &quot;Task_2&quot;: t2_record, 
                        &quot;Task_3&quot;: t3_record, 
                        &quot;Project&quot;: proj_record})

print(proj_df.head())</code></pre>
<pre><code>   Task_1  Task_2  Task_3  Project
0       3       5       4        8
1       3       6       4        9
2       3       6       4        9
3       3       6       4        9
4       3       8       4       11</code></pre>
<pre class="python"><code>plt.bar(range(min(proj_record),max(proj_record)+1),proj_df[&#39;Project&#39;].groupby(proj_df[&#39;Project&#39;]).count())</code></pre>
<pre><code>&lt;BarContainer object of 6 artists&gt;</code></pre>
<div class="figure">
<img src="nb0003_project_risk_assessment_files/nb0003_project_risk_assessment_20_1.png" alt="png" />
<p class="caption">png</p>
</div>
<pre class="python"><code>print(np.percentile(proj_record,95))</code></pre>
<pre><code>11.0</code></pre>
</div>
<div id="scenario-three-correlated-task-risks" class="section level2">
<h2>Scenario Three: Correlated Task Risks</h2>
<hr />
<p>When we see “correlated tasks”, we probably first think of correlation of coefficients. However, the number of correlation coefficients increases exponentially as the number of tasks increases, just like the possible combination of tasks (you can learn more about <a target="_blank" href="https://www.khanacademy.org/math/precalculus/x9e81a4f98389efdf:prob-comb/x9e81a4f98389efdf:combinations/v/combination-formula">combinations</a> and <a target="_blank" href="https://www.khanacademy.org/math/precalculus/x9e81a4f98389efdf:prob-comb/x9e81a4f98389efdf:combinatorics-precalc/v/permutation-formula">permutations</a> on Khan Academy), not to mention the amount of work that has to go into deciding the relationships between those tasks. At the same time, correlation coefficients are mathematical concepts which do not carry the most meaningful real-world interpretations, especially when a project manager tries to understand why the correlation in risks exists or how it could be managed. Therefore, more frequently, we would specify a risk event that could potentially impact multiple tasks and the probability of that risk event; we could also specify a risk factor, which would again affect multiple tasks. For now, let’s go back to the assumption that the three tasks are sequential, as in Scenario One.</p>
<div class="figure">
<img src="nb0003_images/p03_01.png" alt="Sequential Tasks" />
<p class="caption">Sequential Tasks</p>
</div>
<p>In this scenario, the weather would have an impact on all three tasks, while internal communication would affect only Tasks 2 and 3. Let’s say that there is a 40% chance of bad weather, in which case the project is going to be delayed for 2 days. On the other hand, the communication factor varies in a way that is similar to a normal distribution, with a mean of 1 and a standard deviation of 0.1. When the communication between team members is efficient, the communication factor is smaller than 1 and reduces the project completion time; otherwise it is larger than 1 and increases the completion time. By modeling the probability of risk events and factors, we arrive at the following equation:</p>
<p><span class="math display">\[\begin{equation}
\begin{split}
&amp; Project\:Completion\:Time\\
=\: &amp; 2 \cdot Weather + Task_{1}\:Completion\:Time + Communication\:Factor \cdot (Task_{2}\:Completion\:Time + Task_{3}\:Completion\:Time)
\end{split}
\end{equation}\]</span></p>
<p>In our case, since the weather is a binary event, while the communication factor is normally distributed, we define them as the following:</p>
<pre class="python"><code>weather = np.random.binomial(1, 0.4) # the arguments are &#39;number of trials&#39; and &#39;probability of success&#39;respectively
communication = np.random.normal(1, 0.1)  # note that this is technically an indefinite float so rounding is needed

print(weather)
print(communication)</code></pre>
<pre><code>1
0.9500478663155578</code></pre>
<p>We can then modify our simulation, as such:</p>
<pre class="python"><code>reps = 1000

weather_record = [] # recording the events
communication_record = []

t1_record = []
t2_record = []
t3_record = []

proj_record = []

t1_comp = [3, 2, 4]
t1_prob = [0.7, 0.1, 0.2]

t2_comp = [6, 5, 8]
t2_prob = [0.6, 0.2, 0.2]

t3_comp = [4, 3, 5]
t3_prob = [0.8, 0.05, 0.15]

for i in range(reps):
    weather = np.random.binomial(1, 0.4) # simulate the events
    communication = round(np.random.normal(1, 0.1),2)
    
    t1_time = np.random.choice(t1_comp, 1, p=t1_prob)[0]
    t2_time = np.random.choice(t2_comp, 1, p=t2_prob)[0]
    t3_time = np.random.choice(t3_comp, 1, p=t3_prob)[0]
    
    proj_time = 2 * weather + t1_time + communication * max(t2_time, t3_time) # note the changes in calculation
    
    weather_record.append(weather)
    communication_record.append(communication)
    
    t1_record.append(t1_time)
    t2_record.append(t2_time)
    t3_record.append(t3_time)
    
    proj_record.append(proj_time)
    
proj_df = pd.DataFrame({&quot;Weather&quot;: weather_record,
                        &quot;Communication&quot;: communication_record,
                        &quot;Task_1&quot;: t1_record,
                        &quot;Task_2&quot;: t2_record, 
                        &quot;Task_3&quot;: t3_record, 
                        &quot;Project&quot;: proj_record})

print(proj_df.head())</code></pre>
<pre><code>   Weather  Communication  Task_1  Task_2  Task_3  Project
0        1           1.03       3       5       4    10.15
1        0           0.90       3       6       4     8.40
2        0           0.90       2       8       4     9.20
3        0           1.12       2       6       5     8.72
4        1           1.14       3       6       4    11.84</code></pre>
<pre class="python"><code>plt.hist(proj_df[&#39;Project&#39;]) # note how the distribution is continuous now and not discrete anymore</code></pre>
<pre><code>(array([ 10.,  80., 186., 206., 179., 171.,  97.,  48.,  18.,   5.]),
 array([ 6.15 ,  7.079,  8.008,  8.937,  9.866, 10.795, 11.724, 12.653,
        13.582, 14.511, 15.44 ]),
 &lt;a list of 10 Patch objects&gt;)</code></pre>
<div class="figure">
<img src="nb0003_project_risk_assessment_files/nb0003_project_risk_assessment_26_1.png" alt="png" />
<p class="caption">png</p>
</div>
<pre class="python"><code>print(np.percentile(proj_record,95))</code></pre>
<pre><code>13.08</code></pre>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<hr />
<p><a target="_blank" href="https://risk-engineering.org/notebook/monte-carlo-project-risk.html" class="uri">https://risk-engineering.org/notebook/monte-carlo-project-risk.html</a> <br> <a target="_blank" href="https://www.vosesoftware.com/riskwiki/Correlationwithprojectscheduleriskanalysis.php" class="uri">https://www.vosesoftware.com/riskwiki/Correlationwithprojectscheduleriskanalysis.php</a></p>
<pre class="python"><code></code></pre>
</div>

<div class="footer">
  <p style="text-align: center;line-height: 1.5;font-size: 15px;">
    Created and maintained by the <a target="_blank" href="https://www.sauder.ubc.ca/programs/masters-degrees/mban">Master of Business Analytics</a> Community. <br> Licensed under a <a target="_blank" rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>. <br>
  </p>
</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
